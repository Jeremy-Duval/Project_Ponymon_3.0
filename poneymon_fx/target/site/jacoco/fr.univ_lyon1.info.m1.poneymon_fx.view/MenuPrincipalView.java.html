<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="fr"><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/><link rel="stylesheet" href="../jacoco-resources/report.css" type="text/css"/><link rel="shortcut icon" href="../jacoco-resources/report.gif" type="image/gif"/><title>MenuPrincipalView.java</title><link rel="stylesheet" href="../jacoco-resources/prettify.css" type="text/css"/><script type="text/javascript" src="../jacoco-resources/prettify.js"></script></head><body onload="window['PR_TAB_WIDTH']=4;prettyPrint()"><div class="breadcrumb" id="breadcrumb"><span class="info"><a href="../jacoco-sessions.html" class="el_session">Sessions</a></span><a href="../index.html" class="el_report">poneymon_fx</a> &gt; <a href="index.source.html" class="el_package">fr.univ_lyon1.info.m1.poneymon_fx.view</a> &gt; <span class="el_source">MenuPrincipalView.java</span></div><h1>MenuPrincipalView.java</h1><pre class="source lang-java linenums">package fr.univ_lyon1.info.m1.poneymon_fx.view;

import fr.univ_lyon1.info.m1.poneymon_fx.App;
import fr.univ_lyon1.info.m1.poneymon_fx.model.FieldModel;
import fr.univ_lyon1.info.m1.poneymon_fx.controler.Controler;
import fr.univ_lyon1.info.m1.poneymon_fx.model.AquaPoneyModel;
import fr.univ_lyon1.info.m1.poneymon_fx.model.GhostPoneyModel;
import fr.univ_lyon1.info.m1.poneymon_fx.model.LamaModel;
import fr.univ_lyon1.info.m1.poneymon_fx.model.ModeEnum;
import fr.univ_lyon1.info.m1.poneymon_fx.model.PoneyModel;
import javafx.scene.Scene;
import javafx.stage.Stage;
import javafx.scene.layout.GridPane;
import javafx.geometry.Insets;
import javafx.scene.control.Button;
import javafx.event.ActionEvent;
import javafx.event.EventHandler;

/**
 * Menu Principal qui apparait au lancement.
 */
public class MenuPrincipalView {
    /**
     * Longueur et largeur de la fenêtre.
     */
    private int width;
    private int height;

    /**
     * Constructeur MenuView.
     *
     * @param stage Relatif à Canvas pour la construction de la fenêtre
     * @param w     largeur de la fenêtre
     * @param h     hauteur de la fenêtre
     */
<span class="nc" id="L36">    public MenuPrincipalView(final Stage stage, int w, int h) {</span>

<span class="nc" id="L38">        this.width = w;</span>
<span class="nc" id="L39">        this.height = h;</span>

        // Nom de la fenetre
<span class="nc" id="L42">        stage.setTitle(&quot;Poneymon&quot;);</span>

<span class="nc" id="L44">        GridPane grid = new GridPane();</span>
<span class="nc" id="L45">        grid.setHgap(10);</span>
<span class="nc" id="L46">        grid.setVgap(10);</span>
<span class="nc" id="L47">        grid.setPadding(new Insets(25, 25, 25, 25));</span>


<span class="nc" id="L50">        Button buttonSolo = new Button(&quot;Local Game&quot;);</span>
<span class="nc" id="L51">        buttonSolo.setOnAction(new EventHandler&lt;ActionEvent&gt;() {</span>
            @Override
            public void handle(ActionEvent e) {
<span class="nc" id="L54">                MenuLocal ms = new MenuLocal();</span>
<span class="nc" id="L55">                stage.close();</span>
<span class="nc" id="L56">            }</span>
        });
<span class="nc" id="L58">        buttonSolo.setMinSize(200, 50);</span>
<span class="nc" id="L59">        grid.add(buttonSolo, 1, 2);</span>

<span class="nc" id="L61">        Button buttonMulti = new Button(&quot;Multiplayer Game&quot;);</span>
<span class="nc" id="L62">        buttonMulti.setOnAction(new EventHandler&lt;ActionEvent&gt;() {</span>
            @Override
            public void handle(ActionEvent e) {
<span class="nc" id="L65">                MenuMulti mm = new MenuMulti();</span>
<span class="nc" id="L66">                stage.close();</span>
<span class="nc" id="L67">            }</span>
        });
<span class="nc" id="L69">        buttonMulti.setMinSize(200, 50);</span>
<span class="nc" id="L70">        grid.add(buttonMulti, 1, 3);</span>

<span class="nc" id="L72">        Button buttonParameters = new Button(&quot;Paramètres&quot;);</span>
<span class="nc" id="L73">        buttonParameters.setOnAction(new EventHandler&lt;ActionEvent&gt;() {</span>
            @Override
            public void handle(ActionEvent e) {

<span class="nc" id="L77">            }</span>
        });
<span class="nc" id="L79">        buttonParameters.setMinSize(200, 50);</span>
<span class="nc" id="L80">        grid.add(buttonParameters, 1, 4);</span>

<span class="nc" id="L82">        Button buttonExit = new Button(&quot;Exit&quot;);</span>
<span class="nc" id="L83">        buttonExit.setOnAction(new EventHandler&lt;ActionEvent&gt;() {</span>
            @Override
            public void handle(ActionEvent e) {
<span class="nc" id="L86">                stage.close();</span>
<span class="nc" id="L87">            }</span>
        });
<span class="nc" id="L89">        buttonExit.setMinSize(200, 50);</span>
<span class="nc" id="L90">        grid.add(buttonExit, 1, 5);</span>

<span class="nc" id="L92">        Scene scene = new Scene(grid, 270, 320);</span>
<span class="nc" id="L93">        stage.setScene(scene);</span>
<span class="nc" id="L94">        stage.show();</span>
<span class="nc" id="L95">    }</span>

    /**
     * Constructeur sans paramètres.
     */
<span class="nc" id="L100">    public MenuPrincipalView() {</span>
<span class="nc" id="L101">        Stage stage = new Stage();</span>
<span class="nc" id="L102">        MenuPrincipalView mvp = new MenuPrincipalView(stage, 600, 600);</span>
<span class="nc" id="L103">    }</span>

    /**
     * Démarre le jeu.
     */
    public void startGame() {
        /* ****************A Supprimer : les joueurs doivent choisir le perso */
<span class="nc" id="L110">        Class[] cl = new Class[App.characterNumber];</span>
<span class="nc" id="L111">        cl[0] = PoneyModel.class;</span>
<span class="nc" id="L112">        cl[1] = LamaModel.class;</span>
<span class="nc" id="L113">        cl[2] = AquaPoneyModel.class;</span>
<span class="nc" id="L114">        cl[3] = GhostPoneyModel.class;</span>
<span class="nc" id="L115">        cl[4] = PoneyModel.class;</span>
        /* ******************************************************************* */
       
<span class="nc" id="L118">        Stage stage1 = new Stage();</span>
<span class="nc" id="L119">        JfxView gameView = new JfxView(&quot;Poneymon 2.0 - Jeu&quot;, stage1);</span>
        /* creation fieldModel : a faire après choix des perso ; pas dans le menu principal */
<span class="nc" id="L121">        FieldModel fieldModel = new FieldModel(cl, App.playerNumber, </span>
                &quot;test&quot;, ModeEnum.LOCAL, null);
        /* ********************************************************************* */
<span class="nc" id="L124">        FieldView fieldView =</span>
                new FieldView(fieldModel, this.width, this.height);

<span class="nc" id="L127">        Controler controler = Controler.getControler();</span>

<span class="nc" id="L129">        fieldView.setControler(controler);</span>
<span class="nc" id="L130">        controler.addUpdateView(gameView);</span>
<span class="nc" id="L131">        controler.setModel(fieldModel);</span>
<span class="nc" id="L132">        gameView.setView(fieldView);</span>

<span class="nc" id="L134">        Stage stage2 = new Stage();</span>
<span class="nc" id="L135">        JfxView scoreView = new JfxView(&quot;Poneymon 2.0 - Score&quot;, stage2);</span>
<span class="nc" id="L136">        scoreView.setView(new ScoreView(fieldModel, this.width, this.height));</span>
<span class="nc" id="L137">        controler.addView(scoreView);</span>

<span class="nc" id="L139">        controler.startTimer();</span>

<span class="nc" id="L141">    }</span>
}
</pre><div class="footer"><span class="right">Created with <a href="http://www.eclemma.org/jacoco">JaCoCo</a> 0.7.7.201606060606</span></div></body></html>